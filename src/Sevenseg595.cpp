#include "Sevenseg595.h"

#if ARDUINO >= 100
	 // Arduino 1.0 and 0023 compatible!
 #include "Arduino.h"
#else
 #include "WProgram.h"
#endif

uint8_t Sevenseg595::registerPins(int sc, int lc, int sd)
{
	_sc = sc;
	_lc = lc;
	_sd = sd;
	pinMode(_sc, OUTPUT);
	pinMode(_lc, OUTPUT);
	pinMode(_sd, OUTPUT);
}
void Sevenseg595::clear()
{
	byte data = 0xff;
	digitalWrite(_lc, LOW);
	shiftOut(_sd, _sc, MSBFIRST, data);
	digitalWrite(_lc, HIGH);
}
void Sevenseg595::disp(byte data)
{
	int font[] = {
    0b00000000, // (32)  <space>
    0b10000110, // (33)    !
    0b00100010, // (34)    "
    0b01111110, // (35)    #
    0b01101101, // (36)    $
    0b00000000, // (37)    %
    0b00000000, // (38)    &
    0b00000010, // (39)    '
    0b00110000, // (40)    (
    0b00000110, // (41)    )
    0b01100011, // (42)    *
    0b00000000, // (43)    +
    0b00000100, // (44)    ,
    0b01000000, // (45)    -
    0b10000000, // (46)    .
    0b01010010, // (47)    /
    0b00111111, // (48)    0
    0b00000110, // (49)    1
    0b01011011, // (50)    2
    0b01001111, // (51)    3
    0b01100110, // (52)    4
    0b01101101, // (53)    5
    0b01111101, // (54)    6
    0b00100111, // (55)    7
    0b01111111, // (56)    8
    0b01101111, // (57)    9
    0b00000000, // (58)    :
    0b00000000, // (59)    ;
    0b00000000, // (60)    <
    0b01001000, // (61)    =
    0b00000000, // (62)    >
    0b01010011, // (63)    ?
    0b01011111, // (64)    @
    0b01110111, // (65)    A
    0b01111111, // (66)    B
    0b00111001, // (67)    C
    0b00111111, // (68)    D
    0b01111001, // (69)    E
    0b01110001, // (70)    F
    0b00111101, // (71)    G
    0b01110110, // (72)    H
    0b00000110, // (73)    I
    0b00011111, // (74)    J
    0b01101001, // (75)    K
    0b00111000, // (76)    L
    0b00010101, // (77)    M
    0b00110111, // (78)    N
    0b00111111, // (79)    O
    0b01110011, // (80)    P
    0b01100111, // (81)    Q
    0b00110001, // (82)    R
    0b01101101, // (83)    S
    0b01111000, // (84)    T
    0b00111110, // (85)    U
    0b00101010, // (86)    V
    0b00011101, // (87)    W
    0b01110110, // (88)    X
    0b01101110, // (89)    Y
    0b01011011, // (90)    Z
	};
	digitalWrite(_lc, LOW);
	shiftOut(_sd, _sc, MSBFIRST, font[data - 32]);
	digitalWrite(_lc, HIGH);
}

